# Verrapel
> 2018년도 캡스톤설계 과목으로 진행한 증강현실 프로젝트.

![](./verrapel.png)


어플리케이션의 이름은 “Verrapel” 로 Rappel이란 단어는 불어로 감성을 의미한다. 본 프로젝트의 목적은 정적인 데이터인 이미지(사진)을 동적인 이미지(동영상)으로 표현하는 어플리케이션을 제작하는 것으로 사용자가 앨범, 혹은 인쇄된 사진에서 당시의 추억을 유연하게 회상하기 위해 모바일로 앨범을 촬영 했을 때 증강현실(AR)로 사진 위로 영상을 보여주어 사진이 움직이는 듯한 추억을 재생시킬 수 있는 어플리케이션이다.

본 어플리케이션의 기능에 대한 로직은 다음과 같다. 어플리케이션을 사용해 사진과 영상을 촬영하여 서버로 송신한 뒤, 송신된 정보는 Deep Learning과 이미지 유사도 측정 기술을 이용하여 특징점(Feature)을 데이터베이스에 저장한다. 이 후 출력한 사진을 안드로이드 모바일에서 OpenCV를 사용한 사각형 Detecting을 통해 내부에 있는 이미지를 인식하면 서버는 사진에 해당하는 영상을 모바일로 전송한다. 전송된 사진은 증강현실(AR) 기술을 이용하여 사진 위로 영상을 보여주어 당시에 촬영한 영상을 보여준다.


## 프로젝트 설명

[![](./verrapel.png)](https://youtu.be/9aGkzb56GXY)

위 영상은 프로젝트의 핵심 기능만을 보여주고 있다.
실제로는 영상, 이미지의 촬영, 서버로의 전송, 계정별 관리 등의 기능을 포함하고 있으며 자신이 촬영한 이미지를 통해 동시에 촬영된 영상을 위와 같은 방식으로 확인할 수 있다.
자세한 아키텍쳐는 Readme.docx에 설명되어 있다.

소스파일은 본인이 담당한 android 및 증강현실 부분으로만 이루어져 있다.

## 프로젝트의 문제점과 한계

본 프로젝트의 ar 부분은 opencv 기반으로 이루어져 있다.
따라서 안드로이드의 cpu성능을 크게 잡아먹으며 퍼포먼스또한 좋지 않다.
opengl을 이용하면 해결 가능한 부분이라고 생각하였으나 증강현실 및 비디오 처리라는 분야를 캡스톤을 하며 처음 접하였기에 시간상의 압박으로 opencv를 이용한 것으로 마무리를 지었다.

영상의 재생 또한 opencv를 이용하기 때문에 cpu파워의 한계로 프레임이 1~2프레임이 나왔다.
해당 부분을 해결하기 위해서 서버에서 영상을 gif로 변환시켜 사용자가 사진을 detecting 하였을 때 서버로 부터 해당 사진과 연관된 영상의 gif의 프레임들을 다운로드 받도록 하였다.
이런 부분에서 불필요한 데이터통신과 자원이 많이 소모되었으며, 이 또한 opengl을 통해 gpu 기반의 프로세싱을 통한다면 해결 가능할 것으로 보인다.